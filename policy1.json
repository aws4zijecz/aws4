{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AllowStep5Operations",
            "Effect": "Allow",
            "Action": [
                "ec2:*",
                "ecs:CreateService",
                "ecs:DeleteCluster",
                "ecs:DeregisterTaskDefinition",
                "ecs:RegisterTaskDefinition",
                "elasticloadbalancing:CreateTargetGroup",
                "elasticloadbalancing:DeleteTargetGroup",
                "elasticloadbalancing:ModifyTargetGroupAttributes",
                "elasticloadbalancing:CreateLoadBalancer",
                "elasticloadbalancing:DeleteLoadBalancer",
                "elasticloadbalancing:CreateListener",
                "elasticloadbalancing:DeleteListener",
                "elasticloadbalancing:ModifyListener",
                "ecs:UpdateService",
                "ecs:DeleteService",
                "elasticloadbalancing:RegisterTargets",
                "logs:FilterLogEvents",
                "logs:CreateLogGroup",
                "logs:DeleteLogGroup",
                "logs:PutRetentionPolicy",
                "logs:DeleteRetentionPolicy",
                "logs:ListTagsLogGroup",
                "logs:TagResource",
                "application-autoscaling:RegisterScalableTarget",
                "application-autoscaling:ListTagsForResource",
                "application-autoscaling:DeregisterScalableTarget",
                "application-autoscaling:PutScalingPolicy",
                "application-autoscaling:DeleteScalingPolicy",
                "servicediscovery:CreateHttpNamespace",
                "servicediscovery:UpdateHttpNamespace",
                "servicediscovery:GetOperation",
                "ecs:PutClusterCapacityProviders",
                "elasticloadbalancing:AddTags",
                "elasticloadbalancing:RemoveTags",
                "elasticloadbalancing:ModifyLoadBalancerAttributes",
                "logs:TagLogGroup",
                "logs:UntagLogGroup",
                "servicediscovery:TagResource",
                "servicediscovery:UntagResource",
                "ecs:TagResource",
                "ecs:UntagResource",
                "ecs:ListTagsForResource",
                "servicediscovery:GetNamespace",
                "servicediscovery:DeleteNamespace",
                "servicediscovery:ListTagsForResource",
                "servicediscovery:ListNamespaces",
                "application-autoscaling:TagResource",
                "application-autoscaling:UntagResource",
                "ecs:ExecuteCommand",
                "ssmmessages:*",
                "elasticloadbalancing:ModifyTargetGroup",
                "athena:*",
                "glue:*"
            ],
            "Resource": [
                "arn:aws:ec2:eu-north-1:637423491198:*",
                "arn:aws:ecs:eu-north-1:637423491198:*",
                "arn:aws:elasticloadbalancing:eu-north-1:637423491198:*",
                "arn:aws:logs:eu-north-1:637423491198:*",
                "arn:aws:application-autoscaling:eu-north-1:637423491198:scalable-target/*",
                "arn:aws:servicediscovery:eu-north-1:637423491198:*/*",
                "arn:aws:servicediscovery:eu-north-1:637423491198:*",
                "arn:aws:ssmmessages:eu-north-1:637423491198:*",
                "arn:aws:ec2:eu-north-1::image/ami-02d0a1cbe2c3e5ae4",
                "arn:aws:athena:eu-north-1:637423491198:*",
                "arn:aws:glue:eu-north-1:637423491198:*"
            ]
        },
        {
            "Sid": "AllowTerraformToDescribe",
            "Effect": "Allow",
            "Action": [
                "ec2:Describe*",
                "ecs:Describe*",
                "elasticloadbalancing:Describe*",
                "kms:Describe*",
                "logs:Describe*",
                "application-autoscaling:Describe*"
            ],
            "Resource": "*"
        },
        {
            "Sid": "AllowLimitedRoleOperations",
            "Effect": "Allow",
            "Action": [
                "iam:PassRole",
                "iam:CreateServiceLinkedRole",
                "iam:DeleteServiceLinkedRole",
                "iam:ListEntitiesForPolicy"
            ],
            "Resource": [
                "arn:aws:iam::637423491198:role/ecs_execution_role",
                "arn:aws:iam::637423491198:role/AthenaQueryRole",
                "arn:aws:iam::637423491198:role/aws-service-role/elasticloadbalancing.amazonaws.com/AWSServiceRoleForElasticLoadBalancing",
                "arn:aws:iam::637423491198:role/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS",
                "arn:aws:iam::637423491198:role/superset-*",
                "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
            ]
        },
        {
            "Sid": "AllowS3BucketOperations",
            "Effect": "Allow",
            "Action": [
                "s3:CreateBucket",
                "s3:DeleteBucket",
                "s3:GetBucketAcl",
                "s3:GetBucketCORS",
                "s3:GetBucketLogging",
                "s3:GetBucketObjectLockConfiguration",
                "s3:GetBucketPolicy",
                "s3:GetBucketRequestPayment",
                "s3:GetBucketTagging",
                "s3:GetBucketVersioning",
                "s3:GetBucketWebsite",
                "s3:GetEncryptionConfiguration",
                "s3:GetLifecycleConfiguration",
                "s3:GetObject",
                "s3:GetReplicationConfiguration",
                "s3:ListBucket",
                "s3:PutBucketPolicy",
                "s3:PutEncryptionConfiguration",
                "s3:PutObject",
                "s3:GetObjectTagging",
                "s3:DeleteObject"
            ],
            "Resource": [
                "arn:aws:s3:::aws4-bucket4",
                "arn:aws:s3:::aws4-bucket4/*"
            ]
        },
        {
            "Sid": "AllowKMSKeyOperations",
            "Effect": "Allow",
            "Action": [
                "kms:CreateKey",
                "kms:GenerateDataKey",
                "kms:GetKeyPolicy",
                "kms:GetKeyRotationStatus",
                "kms:ListResourceTags",
                "kms:ScheduleKeyDeletion"
            ],
            "Resource": "arn:aws:kms:eu-north-1:637423491198:*"
        },
        {
            "Sid": "AllowKMSCreateKey",
            "Effect": "Allow",
            "Action": [
                "kms:CreateKey"
            ],
            "Resource": "*"
        },
        {
            "Sid": "AllowIAMOperations",
            "Effect": "Allow",
            "Action": [
                "iam:CreatePolicy",
                "iam:CreateRole",
                "iam:GetRole",
                "iam:ListRolePolicies",
                "iam:ListAttachedRolePolicies",
                "iam:ListInstanceProfilesForRole",
                "iam:GetPolicy",
                "iam:GetPolicyVersion",
                "iam:ListPolicyVersions",
                "iam:DeleteRole",
                "iam:DeletePolicy",
                "iam:AttachRolePolicy",
                "iam:CreateUser",
                "iam:GetUser",
                "iam:ListGroupsForUser",
                "iam:DeleteUser",
                "iam:PutUserPolicy",
                "iam:CreateAccessKey",
                "iam:GetUserPolicy",
                "iam:ListAccessKeys",
                "iam:DeleteUserPolicy",
                "iam:DetachRolePolicy",
                "iam:GetServiceLinkedRoleDeletionStatus",
                "iam:UpdateAssumeRolePolicy",
                "iam:PutRolePolicy",
                "iam:GetRolePolicy",
                "iam:DeleteRolePolicy",
                "iam:CreatePolicyVersion",
                "iam:DeletePolicyVersion",
                "iam:SetDefaultPolicyVersion",
                "iam:TagRole",
                "iam:UntagRole",
                "iam:UntagPolicy",
                "iam:TagPolicy",
                "iam:DeleteAccessKey"
            ],
            "Resource": "arn:aws:iam::637423491198:*"
        },
        {
            "Sid": "AllowTerraform",
            "Effect": "Allow",
            "Action": [
                "ecs:DeregisterTaskDefinition",
                "ecs:CreateCluster"
            ],
            "Resource": "*"
        },
        {
            "Sid": "AllowImportCertificate",
            "Effect": "Allow",
            "Action": "acm:ImportCertificate",
            "Resource": "arn:aws:acm:eu-north-1:637423491198:certificate/*"
        }
    ]
}